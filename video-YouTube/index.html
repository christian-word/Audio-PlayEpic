<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio-PlayEpic Player</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #1a1a1a; color: #fff; margin: 0; padding: 20px; }
        
        /* Основний контейнер плеєра */
        .player-container { max-width: 900px; margin: 0 auto; }
        
        .main-video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 12px; background: #000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .main-video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }

        /* Список треків */
        .playlist-header { margin: 30px 0 15px; font-size: 1.2em; border-left: 4px solid #ff0000; padding-left: 15px; }
        
        .video-list { display: flex; flex-direction: column; gap: 10px; max-height: 500px; overflow-y: auto; padding-right: 10px; }
        
        /* Стиль елемента списку */
        .video-item { display: flex; align-items: center; background: #2a2a2a; padding: 10px; border-radius: 8px; cursor: pointer; transition: 0.3s; border: 1px solid transparent; }
        .video-item:hover { background: #3a3a3a; border-color: #555; }
        .video-item.active { background: #444; border-color: #ff0000; }

        .video-item img { width: 100px; height: 56px; object-fit: cover; border-radius: 4px; margin-right: 15px; }
        .video-item-info { flex-grow: 1; }
        .video-item-title { font-size: 0.95em; font-weight: 500; margin-bottom: 4px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .video-item-channel { font-size: 0.8em; color: #aaa; }

        /* Скроллбар */
        .video-list::-webkit-scrollbar { width: 6px; }
        .video-list::-webkit-scrollbar-thumb { background: #444; border-radius: 10px; }
    </style>
</head>
<body>

<div class="player-container">
    <div class="main-video-wrapper">
        <iframe id="mainPlayer" src="" allowfullscreen></iframe>
    </div>

    <div class="playlist-header">Останні завантаження</div>

    <div id="videoList" class="video-list">
        <p style="text-align: center; color: #888;">Завантаження плейлиста...</p>
    </div>
</div>

<script>
    // Пряме посилання на ваш JSON у репозиторії
    const JSON_URL = 'https://raw.githubusercontent.com/christian-word/Audio-PlayEpic/main/video-YouTube/database.json';
    const player = document.getElementById('mainPlayer');
    const listContainer = document.getElementById('videoList');

    async function initPlayer() {
        try {
            const response = await fetch(JSON_URL);
            const videos = await response.json();

            if (videos.length === 0) {
                listContainer.innerHTML = "Відео не знайдено";
                return;
            }

            // 1. Завантажуємо перше відео в плеєр за замовчуванням
            loadVideo(videos[0].videoId);

            // 2. Будуємо список
            listContainer.innerHTML = videos.map((v, index) => `
                <div class="video-item ${index === 0 ? 'active' : ''}" onclick="playNewVideo('${v.videoId}', this)">
                    <img src="${v.thumbnail}" alt="preview">
                    <div class="video-item-info">
                        <div class="video-item-title">${v.title}</div>
                        <div class="video-item-channel">${v.channel}</div>
                    </div>
                </div>
            `).join('');

        } catch (e) {
            listContainer.innerHTML = "Помилка завантаження бази даних.";
            console.error(e);
        }
    }

    function playNewVideo(id, element) {
        // Оновлюємо iframe
        loadVideo(id);
        
        // Змінюємо активний клас у списку
        document.querySelectorAll('.video-item').forEach(el => el.classList.remove('active'));
        element.classList.add('active');
        
        // Скролл вгору до плеєра
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function loadVideo(id) {
        player.src = `https://www.youtube.com/embed/${id}?autoplay=1`;
    }

    initPlayer();
</script>

</body>
</html>